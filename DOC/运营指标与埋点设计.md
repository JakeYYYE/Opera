# 智慧飞滴 & 飞行地图 运营核心指标与埋点设计

> 视角：产品 / 增长 / 运营统一使用的一套指标与埋点方案  
> 范围：前台（首页/需求大厅/服务商库/飞行地图/新闻）+ 登录注册与身份体系

---

## 1. 指标框架总览

### 1.1 北极星指标（North Star）

- **NS1：成功撮合的有效需求数（按周期统计）**
  - 定义：进入“已完成/已成交”状态的需求数量
  - 目标：衡量平台撮合价值，而不仅是流量或浏览
- **NS2：来自「飞行地图」导流的有效业务行为数**
  - 定义：从飞行地图进入并完成“注册 / 发布需求 / 访问服务商”的行为数量
  - 目标：衡量飞行地图作为“工具型入口”的转化能力

### 1.2 分层指标

1. 用户与账号层
   - 新增注册用户数、激活用户（首日/7日）数
   - 注册角色分布（发需求 vs 服务商）
   - 身份配置完成率（完成需求方/服务方资料）

2. 需求侧（需求大厅）
   - 需求创建数、有效需求数、需求浏览数
   - 列表→详情→联系/咨询/派单的转化漏斗

3. 供给侧（服务商库）
   - 服务商列表浏览数、卡片点击数
   - 联系/线索点击数

4. 飞行地图
   - 地图 DAU / 访问次数
   - 人均浏览航拍点数
   - 从地图导出的注册 / 发布需求 / 访问服务商次数

5. 内容（新闻）
   - 新闻阅读 UV/PV、阅读完成度
   - 从新闻进入其他业务模块（需求、服务商、地图）的导流数

---

## 2. 埋点总体规范

### 2.1 事件命名规则

- 统一使用小写 + 下划线：`模块_动作_对象`
- 示例：
  - `auth_view`, `auth_submit`, `auth_success`
  - `need_list_view`, `need_detail_view`
  - `map_spot_click`, `map_spot_create_success`

### 2.2 公共属性（所有事件均建议带上）

| 字段名            | 类型    | 说明                                           |
|-------------------|---------|-----------------------------------------------|
| `event_time`      | string  | 事件时间（ISO 或时间戳）                      |
| `user_id`         | string  | 用户唯一 ID（未登录用匿名 ID / device_id）    |
| `is_login`        | bool    | 是否登录                                      |
| `user_role`       | string  | `admin` / `c-user` / `b-user`                |
| `active_identity` | string  | `provider` / `requester_personal` / `requester_enterprise` |
| `registration_role` | string| 注册时选择的角色：`requester` / `provider`    |
| `channel`         | string  | 来源渠道：`direct` / `map` / `news` / …      |
| `page`            | string  | 当前页面路由，例如 `/`, `/service-needs`     |
| `device`          | string  | `pc` / `mobile` 等                            |
| `utm_*`           | string  | 可选：投放/运营用的 UTM 参数                  |

---

## 3. 登录 / 注册 / 身份模块埋点

### 3.1 登录弹窗与入口

#### 事件：`auth_entry_click`

- 场景：点击 Navbar 右上角「登录 / 注册」按钮
- 触发：按钮点击
- 关键属性：

| 字段名        | 示例          | 说明          |
|---------------|---------------|---------------|
| `entry_place` | `navbar_main` | 入口位置标识  |

#### 事件：`auth_view`

- 场景：登录弹窗展示
- 触发：弹窗打开
- 关键属性：

| 字段名      | 示例      | 说明                   |
|-------------|-----------|------------------------|
| `mode`      | `login`   | 当前 Tab：login/register |

#### 事件：`auth_submit`

- 场景：点击“立即登录 / 立即注册”按钮
- 触发：按钮点击
- 关键属性：

| 字段名    | 示例        | 说明                |
|-----------|-------------|---------------------|
| `mode`    | `login`     | login / register    |
| `has_phone` | true/false| 是否填写了手机号    |

#### 事件：`auth_success`

- 场景：登录/注册成功
- 触发：接口返回成功
- 关键属性：

| 字段名              | 示例              | 说明                          |
|---------------------|-------------------|-------------------------------|
| `mode`              | `login`           | login / register              |
| `registration_role` | `requester`       | 注册时选择的角色（注册场景）  |
| `active_identity`   | `provider`        | 注册/登录后初始化的身份       |

> 指标映射：
> - 新增注册用户数：`auth_success` 且 `mode=register`
> - 注册角色分布：按 `registration_role` 统计

### 3.2 身份切换与申请

#### 事件：`identity_switch_click`

- 场景：在用户菜单中点击“切换为需求方 / 切换为服务方”
- 关键属性：

| 字段名        | 示例                | 说明           |
|---------------|---------------------|----------------|
| `from_identity` | `provider`        | 原身份         |
| `to_identity`   | `requester_personal` | 目标身份     |

#### 事件：`identity_switch_success`

- 触发：`switchIdentity` 成功

| 字段名        | 示例                | 说明   |
|---------------|---------------------|--------|
| `to_identity` | `requester_personal`| 新身份 |

#### 事件：`identity_apply_submit`

- 场景：在身份中心提交“申请成为服务方/需求方”表单

| 字段名       | 示例        | 说明            |
|--------------|-------------|-----------------|
| `type`       | `provider`  | 申请的身份类型  |

---

## 4. 需求大厅（Service Needs）埋点

### 4.1 列表与筛选

#### 事件：`need_list_view`

- 场景：访问需求大厅页面 `/service-needs`
- 关键属性：

| 字段名   | 示例          | 说明               |
|----------|---------------|--------------------|
| `tab`    | `personal`    | 个人 / 企业       |

#### 事件：`need_filter_change`

- 场景：修改筛选条件（分类/区域/状态）

| 字段名     | 示例                 | 说明                     |
|------------|----------------------|--------------------------|
| `category` | `应急救援`           | 分类（可多选转字符串）   |
| `location` | `北京市-朝阳区`      | 区域                     |
| `status`   | `进行中`             | 状态                     |

### 4.2 详情与转化行为

#### 事件：`need_detail_view`

- 场景：打开需求详情页 `/service-needs/:id`

| 字段名    | 示例 | 说明         |
|-----------|------|--------------|
| `need_id` | 101  | 需求 ID      |

#### 事件：`need_contact_click`

- 场景：在需求详情中点击“联系 TA / 咨询”等按钮

| 字段名    | 示例 | 说明         |
|-----------|------|--------------|
| `need_id` | 101  | 需求 ID      |

> 指标映射：
> - 列表→详情转化：`need_detail_view` / `need_list_view`
> - 详情→联系转化：`need_contact_click` / `need_detail_view`

### 4.3 发布需求流程

#### 事件：`need_publish_view`

- 场景：进入“发布需求”页面或弹窗

#### 事件：`need_publish_submit`

- 场景：点击“提交发布”按钮

| 字段名     | 示例         | 说明         |
|------------|--------------|--------------|
| `type`     | `personal`   | 个人 / 企业 |
| `category` | `巡检监测`   | 需求分类     |

#### 事件：`need_publish_success`

- 场景：发布需求成功

> 指标映射：
> - 发布转化率：`need_publish_success` / `need_publish_view`

---

## 5. 服务商库（Service Providers）埋点

### 5.1 列表浏览与筛选

#### 事件：`provider_list_view`

- 场景：访问 `/service-providers`

#### 事件：`provider_filter_change`

- 场景：修改服务商筛选条件

| 字段名     | 示例          | 说明       |
|------------|---------------|------------|
| `tags`     | `测绘,应急`   | 标签组合   |
| `location` | `北京市`      | 区域       |

### 5.2 卡片与联系行为

#### 事件：`provider_card_click`

- 场景：点击服务商卡片

| 字段名      | 示例  | 说明       |
|-------------|-------|------------|
| `provider_id` | 201 | 服务商 ID  |

#### 事件：`provider_contact_click`

- 场景：点击“联系服务商”或类似按钮

> 指标映射：
> - 列表→卡片点击率：`provider_card_click` / `provider_list_view`
> - 线索点击数：统计 `provider_contact_click`

---

## 6. 飞行地图（FindSpot）埋点

### 6.1 地图访问与基础行为

#### 事件：`map_view`

- 场景：访问 `/find-spot`

| 字段名   | 示例        | 说明              |
|----------|-------------|-------------------|
| `entry`  | `navbar_tab` / `admin_shortcut` | 入口来源 |

#### 事件：`map_toggle_spot_panel`

- 场景：点击左上“航拍点”标签，展开/收起推荐面板

| 字段名   | 示例     | 说明            |
|----------|----------|-----------------|
| `status` | `open`   | open / close    |

### 6.2 推荐航拍点与用户航拍点

#### 事件：`map_spot_click`

- 场景：点击地图上的任意缩略图 Marker（公共点或用户点）

| 字段名     | 示例            | 说明                          |
|------------|-----------------|-------------------------------|
| `spot_id`  | 101             | 点位 ID（公共点可用虚拟 ID） |
| `spot_type`| `public`/`user` | 公共推荐点 / 用户自建点      |

#### 事件：`map_spot_detail_open`

- 场景：通过 Marker 或推荐列表打开详情弹窗

| 字段名     | 示例            | 说明                          |
|------------|-----------------|-------------------------------|
| `spot_id`  | 101             | 点位 ID                       |
| `spot_type`| `public`/`user` | 点位类型                      |

> 该事件用于统计“人均浏览点位数”“公共点 vs 用户点的热度分布”。

#### 事件：`map_spot_create_start`

- 场景：点击“创建航拍点”按钮进入创建模式

#### 事件：`map_spot_create_success`

- 场景：完成上传并保存一个用户航拍点

| 字段名    | 示例 | 说明         |
|-----------|------|--------------|
| `spot_id` | 501  | 新建点位 ID  |

### 6.3 导流行为

#### 事件：`map_to_needs_click`

- 场景：从飞行地图点击“看任务”等入口，跳转到需求大厅

| 字段名   | 示例      | 说明                 |
|----------|-----------|----------------------|
| `target` | `/service-needs` | 目标路由      |

#### 事件：`map_to_providers_click`

- 场景：从飞行地图跳转“服务商库”等入口

> 指标映射：
> - 地图 DAU：`map_view` 的去重用户数
> - 人均浏览点位数：`map_spot_detail_open` / `map_view`
> - 导流率（地图→需求）：`map_to_needs_click` / `map_view`

---

## 7. 新闻模块埋点

### 7.1 列表与筛选

#### 事件：`news_list_view`

- 场景：访问 `/news`

#### 事件：`news_filter_change`

- 场景：切换新闻分类 Tab / 筛选

| 字段名   | 示例         | 说明             |
|----------|--------------|------------------|
| `category` | `政策解读` | 当前选中分类     |

### 7.2 详情与入口来源

#### 事件：`news_detail_view`

- 场景：打开文章详情 `/news/:id`

| 字段名     | 示例 | 说明      |
|------------|------|-----------|
| `news_id`  | 301  | 文章 ID   |
| `from`     | `home`/`list` | 来源：首页卡片/列表等 |

> 指标映射：
> - 新闻阅读 UV/PV：统计 `news_detail_view`
> - 内容导流：从新闻详情点击进入“需求/服务商/地图”的事件可单独再设计，如 `news_to_needs_click`。

---

## 8. 指标看板建议

### 8.1 平台运营看板

- 新增注册、活跃用户（按身份/角色拆分）
- 需求创建数、有效需求数、需求完成数
- 服务商访问与线索点击

### 8.2 飞行地图专项看板

- 地图 DAU、访问次数
- 人均浏览点位数（公共/用户）
- 地图 → 注册 / 发布需求 / 访问服务商 导流漏斗

### 8.3 内容运营看板

- 新闻阅读 UV/PV、分类阅读占比
- 从首页/列表/详情到其他业务模块的点击数和转化率

---

## 9. 实施与落地建议

- 优先埋点：先覆盖登录注册、需求大厅、飞行地图导流相关事件，确保能支持核心北极星指标。
- 后续迭代：根据运营活动（增长、拉新、促活）补充活动级埋点与 AB 实验字段。

