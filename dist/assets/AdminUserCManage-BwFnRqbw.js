import{r as m,c as Q,e as v,h as l,i as a,w as s,j as f,f as g,p as o,t as d,q as i,n as P,g as b,F as G,k as J,s as K,O as W,E as _,ag as ae}from"./index-U0bzlslD.js";const ne={class:"space-y-6"},de={class:"bg-white p-4 rounded-xl border border-gray-100 flex gap-4 shadow-sm"},oe={class:"flex items-center gap-3"},ie={class:"font-medium text-gray-900"},ue={class:"text-xs text-gray-400"},re={class:"text-xs text-gray-400"},pe={class:"flex items-center gap-2"},ve={class:"text-sm text-gray-800"},ge={key:3,class:"text-gray-300"},ce={class:"flex items-center gap-2 text-xs"},me={class:"text-xs text-gray-700"},fe={class:"text-xs text-gray-700"},ye={class:"text-xs text-gray-700"},xe={class:"flex flex-wrap items-center gap-2"},be={class:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 mt-6"},_e={class:"flex items-center gap-3"},ke={class:"font-medium text-gray-900 text-sm"},Be={class:"text-[11px] text-gray-400"},Ce={class:"text-xs text-gray-700"},Ve={class:"mt-0.5"},Te={class:"text-[11px] text-gray-700 space-y-0.5"},he={key:1,class:"text-xs text-gray-400"},Le={key:0,class:"space-y-6"},ze={class:"grid grid-cols-2 gap-4 text-sm"},De={class:"bg-gray-50 p-3 rounded-lg"},Ue={class:"font-medium text-gray-900"},$e={class:"bg-gray-50 p-3 rounded-lg"},je={class:"font-medium text-gray-900"},Ne={class:"bg-gray-50 p-3 rounded-lg"},Se={class:"font-medium text-gray-900"},Ae={class:"bg-gray-50 p-3 rounded-lg"},Pe={class:"font-medium text-gray-900"},Re={class:"space-y-4"},Ee={key:0,class:"grid grid-cols-2 gap-3"},Me={class:"text-sm text-gray-600 truncate flex-1"},qe={key:1,class:"text-gray-400 text-xs italic"},He={key:0,class:"grid grid-cols-2 gap-3"},Ie={class:"text-sm text-gray-600 truncate flex-1"},Fe={key:1,class:"text-gray-400 text-xs italic"},Oe={key:0,class:"flex justify-end gap-3"},Qe={key:1,class:"flex justify-end gap-3"},Ge={key:0,class:"space-y-4"},Je={class:"flex items-center gap-4 bg-gray-50 p-4 rounded-lg border border-gray-100"},Ke={class:"font-bold text-lg text-gray-800"},We={class:"grid grid-cols-2 gap-4 text-sm text-gray-600 bg-white p-2"},Xe={class:"font-bold text-gray-900"},Ye={class:"font-bold text-gray-900"},Ze={class:"flex justify-end gap-3"},we={class:"space-y-4"},et={class:"flex items-center gap-3"},tt={class:"flex justify-end gap-3"},at={__name:"AdminUserCManage",setup(lt){const R=m(ae),$=m(""),T=m(""),h=m(""),k=m(!1),r=m(null),X=n=>{r.value=n,k.value=!0},C=m(!1),c=m(null),j=m(""),Y=Q(()=>R.value.filter(n=>{const e=n.nickname.toLowerCase().includes($.value.toLowerCase()),B=!T.value||n.level===T.value,U=!h.value||n.certificationStatus===h.value;return e&&B&&U})),E=Q(()=>R.value.filter(n=>n.upgradeToB&&n.upgradeToB.status)),Z=n=>{c.value=n,j.value="",C.value=!0},w=()=>{c.value&&(c.value.certificationStatus="approved",c.value.level="advanced",c.value.providerLevel="lv2",_.success(`å·²æ‰¹å‡† ${c.value.nickname} çš„é£æ‰‹è®¤è¯`),C.value=!1)},ee=()=>{c.value&&(c.value.certificationStatus="rejected",_.warning(`å·²é©³å› ${c.value.nickname} çš„ç”³è¯·`),C.value=!1)},M=n=>{n.status=n.status==="active"?"banned":"active",_.success("çŠ¶æ€å·²æ›´æ–°")},V=m(!1),L=m(null),z=m(0),D=m("add"),te=n=>{L.value=n,z.value=0,D.value="add",V.value=!0},le=()=>{if(!L.value)return;const n=Number(z.value||0);if(n<=0){_.warning("è¯·è¾“å…¥æœ‰æ•ˆé¢åº¦");return}const e=D.value==="add"?1:-1;L.value.balanceCoins=Math.max(0,(L.value.balanceCoins||0)+e*n),_.success("èµ„äº§å·²è°ƒæ•´"),V.value=!1},q=n=>{n.upgradeToB&&(n.upgradeToB.status="approved",n.providerLevel=n.providerLevel||"lv3",n.companyName=n.upgradeToB.companyName||n.companyName||n.nickname,n.type=n.upgradeToB.type||n.type||"general",n.contactPerson=n.upgradeToB.contactName||n.contactPerson,n.phone=n.upgradeToB.contactPhone||n.phone,n.requesterEnterprise=!0,_.success(`å·²é€šè¿‡ ${n.nickname} çš„Bç«¯å‡çº§ç”³è¯·`))},H=n=>{n.upgradeToB&&(n.upgradeToB.status="rejected",_.warning(`å·²é©³å› ${n.nickname} çš„Bç«¯å‡çº§ç”³è¯·`))};return(n,e)=>{const B=f("el-option"),U=f("el-select"),N=f("el-input"),S=f("el-avatar"),u=f("el-table-column"),y=f("el-tag"),p=f("el-button"),I=f("el-table"),F=f("el-icon"),A=f("el-dialog"),O=f("el-radio-button"),se=f("el-radio-group");return o(),v("div",ne,[e[53]||(e[53]=l("div",{class:"flex justify-between items-end"},[l("div",null,[l("h2",{class:"text-xl font-bold text-gray-800"},"Cç«¯ç”¨æˆ·ç®¡ç†"),l("p",{class:"text-sm text-gray-500 mt-1"},"ç®¡ç†ä¸ªäººç”¨æˆ·ï¼Œå¤„ç†é£æ‰‹è®¤è¯ç”³è¯·ï¼Œä¿ƒè¿›Cç«¯å‘Bç«¯è½¬åŒ–")])],-1)),l("div",de,[a(U,{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=t=>T.value=t),placeholder:"ç”¨æˆ·ç­‰çº§",clearable:"",class:"w-40"},{default:s(()=>[a(B,{label:"åŸºç¡€é£æ‰‹",value:"novice"}),a(B,{label:"è®¤è¯é£æ‰‹",value:"advanced"})]),_:1},8,["modelValue"]),a(U,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),placeholder:"è®¤è¯çŠ¶æ€",clearable:"",class:"w-40"},{default:s(()=>[a(B,{label:"å¾…å®¡æ ¸",value:"pending"}),a(B,{label:"å·²è®¤è¯",value:"approved"})]),_:1},8,["modelValue"]),a(N,{modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=t=>$.value=t),placeholder:"æœç´¢æ˜µç§°","prefix-icon":"Search",class:"w-64"},null,8,["modelValue"])]),a(I,{data:Y.value,class:"w-full border rounded-xl overflow-hidden shadow-sm","header-cell-style":{background:"#f9fafb",color:"#6b7280"}},{default:s(()=>[a(u,{label:"ç”¨æˆ·","min-width":"180"},{default:s(({row:t})=>[l("div",oe,[a(S,{src:t.avatar,size:40},null,8,["src"]),l("div",null,[l("div",ie,d(t.nickname),1),l("div",ue,"ID: "+d(t.id),1),l("div",re,"æ‰‹æœºå·: "+d(t.phoneMasked||"â€”"),1)])])]),_:1}),a(u,{label:"ä¼šå‘˜ç­‰çº§",width:"120"},{default:s(({row:t})=>[a(y,{type:t.membershipLevel==="vip"?"danger":"default"},{default:s(()=>[i(d(t.membershipLevel==="vip"?"VIP":"æ™®é€š"),1)]),_:2},1032,["type"])]),_:1}),a(u,{label:"è´¦æˆ·èµ„äº§",width:"140"},{default:s(({row:t})=>[l("div",pe,[l("span",ve,d(t.balanceCoins||0)+" å¸",1),a(p,{text:"",size:"small",onClick:x=>te(t)},{default:s(()=>[...e[13]||(e[13]=[i("èµ„äº§è°ƒèŠ‚",-1)])]),_:1},8,["onClick"])])]),_:1}),a(u,{label:"è®¤è¯çŠ¶æ€",width:"120"},{default:s(({row:t})=>[t.certificationStatus==="pending"?(o(),g(y,{key:0,type:"warning",effect:"dark"},{default:s(()=>[...e[14]||(e[14]=[i("å®¡æ ¸ä¸­",-1)])]),_:1})):t.certificationStatus==="approved"?(o(),g(y,{key:1,type:"success",effect:"plain"},{default:s(()=>[...e[15]||(e[15]=[i("å·²è®¤è¯",-1)])]),_:1})):t.certificationStatus==="rejected"?(o(),g(y,{key:2,type:"danger",effect:"plain"},{default:s(()=>[...e[16]||(e[16]=[i("å·²é©³å›",-1)])]),_:1})):(o(),v("span",ge,"-"))]),_:1}),a(u,{label:"è®¤è¯/èµ„è´¨","min-width":"200"},{default:s(({row:t})=>[l("div",ce,[l("span",{class:P(t.idVerified?"text-green-600":"text-gray-400")},d(t.idVerified?"ğŸ†” å®å":"ğŸ†” æœªå®å"),3),l("span",{class:P(t.pilotLicense?"text-green-600":"text-red-500")},d(t.pilotLicense?"âœ… é£æ‰‹è¯":"âŒ é£æ‰‹è¯"),3),l("span",{class:P(t.insuranceActive?"text-green-600":"text-red-500")},d(t.insuranceActive?"âœ… ä¿é™©":"âŒ ä¿é™©"),3)])]),_:1}),a(u,{label:"ä¿¡ç”¨/é£æ§",width:"160"},{default:s(({row:t})=>[l("div",me,"ä¿¡ç”¨åˆ† "+d(t.creditScore||0)+" / æŠ•è¯‰ "+d(t.complaintsCount||0),1)]),_:1}),a(u,{label:"æ´»è·ƒæ•°æ®","min-width":"220"},{default:s(({row:t})=>[l("div",fe,"æœºä½ "+d(t.spotUploads||0)+" / æ¥å• "+d(t.ordersCount||0)+" / é£è¡Œ "+d(t.flightHours||0)+"h",1)]),_:1}),a(u,{label:"æ³¨å†Œ/ç™»å½•",width:"200"},{default:s(({row:t})=>[l("div",ye,"æ³¨å†Œ "+d(t.registerDate)+" / ç™»å½• "+d(t.lastLogin||"â€”"),1)]),_:1}),a(u,{prop:"flightHours",label:"é£è¡Œæ—¶é•¿(h)",width:"120",sortable:""}),a(u,{prop:"registerDate",label:"æ³¨å†Œæ—¶é—´",width:"120"}),a(u,{label:"èº«ä»½æ ‡ç­¾","min-width":"240"},{default:s(({row:t})=>[l("div",xe,[t.requesterPersonal||t.requesterEnterprise?(o(),g(y,{key:0,type:"warning"},{default:s(()=>[...e[17]||(e[17]=[i("éœ€æ±‚æ–¹",-1)])]),_:1})):b("",!0),t.providerLevel?(o(),g(y,{key:1,type:"success"},{default:s(()=>[...e[18]||(e[18]=[i("æœåŠ¡æ–¹",-1)])]),_:1})):b("",!0)])]),_:1}),a(u,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:s(({row:t})=>[t.certificationStatus==="pending"?(o(),g(p,{key:0,type:"primary",size:"small",onClick:x=>Z(t)},{default:s(()=>[...e[19]||(e[19]=[i(" å®¡æ ¸è®¤è¯ ",-1)])]),_:1},8,["onClick"])):b("",!0),t.status==="active"?(o(),g(p,{key:1,type:"danger",link:"",size:"small",onClick:x=>M(t)},{default:s(()=>[...e[20]||(e[20]=[i(" å°ç¦ ",-1)])]),_:1},8,["onClick"])):(o(),g(p,{key:2,type:"success",link:"",size:"small",onClick:x=>M(t)},{default:s(()=>[...e[21]||(e[21]=[i(" è§£å° ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"]),l("div",be,[e[29]||(e[29]=l("div",{class:"flex items-center justify-between mb-3"},[l("div",null,[l("h3",{class:"text-base font-semibold text-gray-800"},"Cç«¯å‡çº§ä¸ºBç«¯æœåŠ¡å•†ç”³è¯·"),l("p",{class:"text-xs text-gray-500 mt-1"},"æŸ¥çœ‹å¹¶å¤„ç†ä¸ªäººç”¨æˆ·æäº¤çš„Bç«¯å‡çº§ç”³è¯·")])],-1)),E.value.length?(o(),g(I,{key:0,data:E.value,size:"small"},{default:s(()=>[a(u,{label:"ç”¨æˆ·","min-width":"180"},{default:s(({row:t})=>[l("div",_e,[a(S,{src:t.avatar,size:32},null,8,["src"]),l("div",null,[l("div",ke,d(t.nickname),1),l("div",Be,"ID: "+d(t.id),1)])])]),_:1}),a(u,{label:"ç”³è¯·ä¼ä¸šä¿¡æ¯","min-width":"220"},{default:s(({row:t})=>[l("div",Ce,[l("div",null,"å…¬å¸ï¼š"+d(t.upgradeToB.companyName||"â€”"),1),l("div",Ve,"è”ç³»äººï¼š"+d(t.upgradeToB.contactName||"â€”")+" / "+d(t.upgradeToB.contactPhone||"â€”"),1)])]),_:1}),a(u,{label:"ææ–™",width:"160"},{default:s(({row:t})=>[l("div",Te,[l("div",null,"é£æ‰‹è¯ä¹¦ï¼š"+d(t.upgradeToB.pilotLicenseDocs&&t.upgradeToB.pilotLicenseDocs.length||0)+" ä»½",1),l("div",null,"ä¿é™©å‡­è¯ï¼š"+d(t.upgradeToB.insuranceDocs&&t.upgradeToB.insuranceDocs.length||0)+" ä»½",1)])]),_:1}),a(u,{label:"çŠ¶æ€",width:"120"},{default:s(({row:t})=>[t.upgradeToB.status==="pending"?(o(),g(y,{key:0,type:"warning",size:"small"},{default:s(()=>[...e[22]||(e[22]=[i("å¾…å®¡æ ¸",-1)])]),_:1})):t.upgradeToB.status==="approved"?(o(),g(y,{key:1,type:"success",size:"small"},{default:s(()=>[...e[23]||(e[23]=[i("å·²é€šè¿‡",-1)])]),_:1})):t.upgradeToB.status==="rejected"?(o(),g(y,{key:2,type:"danger",size:"small"},{default:s(()=>[...e[24]||(e[24]=[i("å·²é©³å›",-1)])]),_:1})):(o(),g(y,{key:3,size:"small"},{default:s(()=>[...e[25]||(e[25]=[i("æœªçŸ¥",-1)])]),_:1}))]),_:1}),a(u,{label:"æ“ä½œ",width:"220"},{default:s(({row:t})=>[a(p,{link:"",type:"primary",size:"small",onClick:x=>X(t)},{default:s(()=>[...e[26]||(e[26]=[i(" è¯¦æƒ… ",-1)])]),_:1},8,["onClick"]),t.upgradeToB.status==="pending"?(o(),g(p,{key:0,type:"primary",size:"small",onClick:x=>q(t)},{default:s(()=>[...e[27]||(e[27]=[i(" é€šè¿‡ ",-1)])]),_:1},8,["onClick"])):b("",!0),t.upgradeToB.status==="pending"?(o(),g(p,{key:1,type:"danger",size:"small",plain:"",onClick:x=>H(t)},{default:s(()=>[...e[28]||(e[28]=[i(" é©³å› ",-1)])]),_:1},8,["onClick"])):b("",!0)]),_:1})]),_:1},8,["data"])):(o(),v("div",he,"æš‚æ— Cç«¯å‡çº§Bç«¯çš„ç”³è¯·"))]),a(A,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=t=>k.value=t),title:"å‡çº§ç”³è¯·è¯¦æƒ…",width:"600px"},{footer:s(()=>[r.value&&r.value.upgradeToB.status==="pending"?(o(),v("div",Oe,[a(p,{onClick:e[3]||(e[3]=t=>{H(r.value),k.value=!1}),type:"danger",plain:""},{default:s(()=>[...e[40]||(e[40]=[i("é©³å›ç”³è¯·",-1)])]),_:1}),a(p,{onClick:e[4]||(e[4]=t=>{q(r.value),k.value=!1}),type:"primary"},{default:s(()=>[...e[41]||(e[41]=[i("é€šè¿‡ç”³è¯·",-1)])]),_:1})])):(o(),v("div",Qe,[a(p,{onClick:e[5]||(e[5]=t=>k.value=!1)},{default:s(()=>[...e[42]||(e[42]=[i("å…³é—­",-1)])]),_:1})]))]),default:s(()=>[r.value?(o(),v("div",Le,[l("div",null,[e[34]||(e[34]=l("h4",{class:"font-bold text-gray-800 mb-3 border-l-4 border-blue-500 pl-2"},"ä¼ä¸šåŸºæœ¬ä¿¡æ¯",-1)),l("div",ze,[l("div",De,[e[30]||(e[30]=l("span",{class:"text-gray-500 block mb-1"},"ä¼ä¸šåç§°",-1)),l("span",Ue,d(r.value.upgradeToB.companyName),1)]),l("div",$e,[e[31]||(e[31]=l("span",{class:"text-gray-500 block mb-1"},"ä¸šåŠ¡ç±»å‹",-1)),l("span",je,d(r.value.upgradeToB.type==="photography"?"èˆªæ‹æœåŠ¡":"é€šç”¨æœåŠ¡"),1)]),l("div",Ne,[e[32]||(e[32]=l("span",{class:"text-gray-500 block mb-1"},"è”ç³»äºº",-1)),l("span",Se,d(r.value.upgradeToB.contactName),1)]),l("div",Ae,[e[33]||(e[33]=l("span",{class:"text-gray-500 block mb-1"},"è”ç³»ç”µè¯",-1)),l("span",Pe,d(r.value.upgradeToB.contactPhone),1)])])]),l("div",null,[e[39]||(e[39]=l("h4",{class:"font-bold text-gray-800 mb-3 border-l-4 border-blue-500 pl-2"},"ç”³è¯·ææ–™",-1)),l("div",Re,[l("div",null,[e[36]||(e[36]=l("div",{class:"text-sm font-medium text-gray-700 mb-2"},"é£æ‰‹èµ„è´¨è¯ä¹¦",-1)),r.value.upgradeToB.pilotLicenseDocs&&r.value.upgradeToB.pilotLicenseDocs.length?(o(),v("div",Ee,[(o(!0),v(G,null,J(r.value.upgradeToB.pilotLicenseDocs,(t,x)=>(o(),v("div",{key:x,class:"flex items-center gap-2 p-2 border border-gray-200 rounded-lg bg-white hover:border-blue-300 transition-colors cursor-pointer"},[a(F,{class:"text-blue-500 text-lg"},{default:s(()=>[a(K(W))]),_:1}),l("span",Me,d(t),1),a(p,{link:"",type:"primary",size:"small"},{default:s(()=>[...e[35]||(e[35]=[i("é¢„è§ˆ",-1)])]),_:1})]))),128))])):(o(),v("div",qe,"æ— æ–‡ä»¶"))]),l("div",null,[e[38]||(e[38]=l("div",{class:"text-sm font-medium text-gray-700 mb-2"},"ä¿é™©å‡­è¯",-1)),r.value.upgradeToB.insuranceDocs&&r.value.upgradeToB.insuranceDocs.length?(o(),v("div",He,[(o(!0),v(G,null,J(r.value.upgradeToB.insuranceDocs,(t,x)=>(o(),v("div",{key:x,class:"flex items-center gap-2 p-2 border border-gray-200 rounded-lg bg-white hover:border-blue-300 transition-colors cursor-pointer"},[a(F,{class:"text-blue-500 text-lg"},{default:s(()=>[a(K(W))]),_:1}),l("span",Ie,d(t),1),a(p,{link:"",type:"primary",size:"small"},{default:s(()=>[...e[37]||(e[37]=[i("é¢„è§ˆ",-1)])]),_:1})]))),128))])):(o(),v("div",Fe,"æ— æ–‡ä»¶"))])])])])):b("",!0)]),_:1},8,["modelValue"]),a(A,{modelValue:C.value,"onUpdate:modelValue":e[8]||(e[8]=t=>C.value=t),title:"é£æ‰‹è®¤è¯å®¡æ ¸",width:"500px"},{footer:s(()=>[l("div",Ze,[a(p,{onClick:ee,type:"danger",plain:""},{default:s(()=>[...e[47]||(e[47]=[i("é©³å›ç”³è¯·",-1)])]),_:1}),a(p,{onClick:w,type:"primary"},{default:s(()=>[...e[48]||(e[48]=[i("é€šè¿‡è®¤è¯",-1)])]),_:1})])]),default:s(()=>[c.value?(o(),v("div",Ge,[l("div",Je,[a(S,{src:c.value.avatar,size:50},null,8,["src"]),l("div",null,[l("div",Ke,d(c.value.nickname),1),e[43]||(e[43]=l("div",{class:"text-sm text-blue-600 font-medium mt-1"},"ç”³è¯·å‡çº§ä¸ºï¼šè®¤è¯é£æ‰‹",-1))])]),l("div",We,[l("div",null,[e[44]||(e[44]=i("å½“å‰é£è¡Œæ—¶é•¿ï¼š",-1)),l("span",Xe,d(c.value.flightHours)+" å°æ—¶",1)]),l("div",null,[e[45]||(e[45]=i("æ³¨å†Œæ—¥æœŸï¼š",-1)),l("span",Ye,d(c.value.registerDate),1)])]),l("div",null,[e[46]||(e[46]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"å®¡æ ¸æ„è§",-1)),a(N,{modelValue:j.value,"onUpdate:modelValue":e[7]||(e[7]=t=>j.value=t),type:"textarea",rows:"3",placeholder:"è¯·è¾“å…¥é€šè¿‡æˆ–é©³å›çš„ç†ç”±...",class:"w-full"},null,8,["modelValue"])])])):b("",!0)]),_:1},8,["modelValue"]),a(A,{modelValue:V.value,"onUpdate:modelValue":e[12]||(e[12]=t=>V.value=t),title:"èµ„äº§è°ƒèŠ‚",width:"420px"},{footer:s(()=>[l("div",tt,[a(p,{onClick:e[11]||(e[11]=t=>V.value=!1)},{default:s(()=>[...e[51]||(e[51]=[i("å–æ¶ˆ",-1)])]),_:1}),a(p,{type:"primary",onClick:le},{default:s(()=>[...e[52]||(e[52]=[i("ç¡®å®š",-1)])]),_:1})])]),default:s(()=>[l("div",we,[l("div",et,[a(se,{modelValue:D.value,"onUpdate:modelValue":e[9]||(e[9]=t=>D.value=t)},{default:s(()=>[a(O,{label:"add"},{default:s(()=>[...e[49]||(e[49]=[i("å¢åŠ ",-1)])]),_:1}),a(O,{label:"sub"},{default:s(()=>[...e[50]||(e[50]=[i("å‡å°‘",-1)])]),_:1})]),_:1},8,["modelValue"])]),a(N,{modelValue:z.value,"onUpdate:modelValue":e[10]||(e[10]=t=>z.value=t),type:"number",placeholder:"è¯·è¾“å…¥è°ƒæ•´é¢åº¦ï¼ˆå¸ï¼‰"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}};export{at as default};
