import{r as f,c as D,e as h,h as s,i as a,w as l,j as r,F as T,k as $,p as u,q as n,f as c,g as V,t as o,n as _,E as U,ab as q}from"./index-U0bzlslD.js";const F={class:"space-y-6"},G={class:"flex justify-between items-end"},I={class:"bg-white p-4 rounded-xl border border-gray-100 flex flex-col md:flex-row gap-4 shadow-sm"},Q={class:"md:hidden space-y-4"},R={class:"flex items-center justify-between mb-3"},H={class:"font-medium text-gray-900 truncate flex-1 mr-2"},J={class:"grid grid-cols-2 gap-2 text-sm mb-3"},K={class:"text-gray-500"},O={class:"text-gray-800"},W={class:"text-gray-500"},X={class:"text-gray-800"},Y={class:"text-gray-500"},Z={class:"text-gray-800"},ee={class:"text-gray-500"},te={class:"text-gray-800"},se={class:"flex items-center justify-between pt-3 border-t border-gray-50"},le={class:"flex gap-2 text-xs"},ae={class:"flex gap-2"},ne={class:"font-medium text-gray-800"},oe={class:"text-xs text-gray-400"},de={class:"flex items-center gap-2"},ie={class:"text-sm text-gray-800"},re={class:"flex items-center gap-2 text-xs"},ue={class:"text-xs text-gray-700"},pe={class:"text-xs text-gray-700"},me={class:"text-xs text-gray-700"},fe={class:"flex flex-wrap items-center gap-2"},ce={class:"flex items-center gap-2"},ye={class:"text-sm"},_e={class:"space-y-4"},ve={class:"flex items-center gap-3"},xe={class:"flex justify-end gap-3"},ke={__name:"AdminUserSmallBManage",setup(ge){const j=f(q),k=f(""),v=f(""),C=D(()=>j.value.filter(m=>{const e=m.companyName.toLowerCase().includes(k.value.toLowerCase()),i=!v.value||m.type===v.value;return e&&i})),y=f(!1),x=f(null),g=f(0),b=f("add"),w=m=>{x.value=m,g.value=0,b.value="add",y.value=!0},A=()=>{if(!x.value)return;const m=Number(g.value||0);if(m<=0){U.warning("请输入有效额度");return}const e=b.value==="add"?1:-1;x.value.balanceCoins=Math.max(0,(x.value.balanceCoins||0)+e*m),U.success("资产已调整"),y.value=!1};return(m,e)=>{const i=r("el-button"),L=r("el-option"),B=r("el-select"),z=r("el-input"),p=r("el-tag"),d=r("el-table-column"),S=r("el-table"),N=r("el-radio-button"),E=r("el-radio-group"),M=r("el-dialog");return u(),h("div",F,[s("div",G,[e[7]||(e[7]=s("div",null,[s("h2",{class:"text-xl font-bold text-gray-800"},"小B端商户管理"),s("p",{class:"text-sm text-gray-500 mt-1"},"管理航拍公司、保险机构等商业合作伙伴")],-1)),a(i,{type:"primary",icon:"Plus"},{default:l(()=>[...e[6]||(e[6]=[n("新增商户",-1)])]),_:1})]),s("div",I,[a(B,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),placeholder:"商户类型",clearable:"",class:"w-full md:w-40"},{default:l(()=>[a(L,{label:"航拍公司",value:"photography"}),a(L,{label:"保险机构",value:"insurance"})]),_:1},8,["modelValue"]),a(z,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=t=>k.value=t),placeholder:"搜索公司名称","prefix-icon":"Search",class:"w-full md:w-64"},null,8,["modelValue"])]),s("div",Q,[(u(!0),h(T,null,$(C.value,t=>(u(),h("div",{key:t.id,class:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm"},[s("div",R,[s("div",H,o(t.companyName),1),t.type==="photography"?(u(),c(p,{key:0,type:"primary",size:"small"},{default:l(()=>[...e[8]||(e[8]=[n("航拍",-1)])]),_:1})):t.type==="insurance"?(u(),c(p,{key:1,type:"warning",size:"small"},{default:l(()=>[...e[9]||(e[9]=[n("保险",-1)])]),_:1})):V("",!0)]),s("div",J,[s("div",K,[e[10]||(e[10]=n("联系人: ",-1)),s("span",O,o(t.contactPerson),1)]),s("div",W,[e[11]||(e[11]=n("电话: ",-1)),s("span",X,o(t.phone),1)]),s("div",Y,[e[12]||(e[12]=n("资产: ",-1)),s("span",Z,o(t.balanceCoins||0)+" 币",1)]),s("div",ee,[e[13]||(e[13]=n("信用: ",-1)),s("span",te,o(t.creditScore||0),1)])]),s("div",se,[s("div",le,[s("span",{class:_(t.businessLicense?"text-green-600":"text-gray-400")},o(t.businessLicense?"有执照":"无执照"),3),s("span",{class:_(t.isGold?"text-yellow-600 font-bold":"text-gray-400")},o(t.isGold?"金牌":""),3)]),s("div",ae,[a(i,{link:"",type:"primary",size:"small"},{default:l(()=>[...e[14]||(e[14]=[n("详情",-1)])]),_:1}),a(i,{link:"",type:"primary",size:"small",onClick:P=>w(t)},{default:l(()=>[...e[15]||(e[15]=[n("资产",-1)])]),_:1},8,["onClick"]),a(i,{link:"",type:"primary",size:"small"},{default:l(()=>[...e[16]||(e[16]=[n("编辑",-1)])]),_:1})])])]))),128))]),a(S,{data:C.value,class:"hidden md:block w-full border rounded-xl overflow-hidden shadow-sm","header-cell-style":{background:"#f9fafb",color:"#6b7280"}},{default:l(()=>[a(d,{prop:"companyName",label:"公司名称","min-width":"200"},{default:l(({row:t})=>[s("span",ne,o(t.companyName),1),s("div",oe,"手机号: "+o(t.phone&&t.phone.slice(0,3)+"****"+t.phone.slice(-4)||"—"),1)]),_:1}),a(d,{label:"类型",width:"120"},{default:l(({row:t})=>[t.type==="photography"?(u(),c(p,{key:0,type:"primary"},{default:l(()=>[...e[17]||(e[17]=[n("航拍公司",-1)])]),_:1})):t.type==="insurance"?(u(),c(p,{key:1,type:"warning"},{default:l(()=>[...e[18]||(e[18]=[n("保险机构",-1)])]),_:1})):(u(),c(p,{key:2,type:"info"},{default:l(()=>[...e[19]||(e[19]=[n("其他",-1)])]),_:1}))]),_:1}),a(d,{label:"用户角色",width:"120"},{default:l(({row:t})=>[a(p,{type:"success"},{default:l(()=>[...e[20]||(e[20]=[n("服务商",-1)])]),_:1})]),_:1}),a(d,{label:"会员等级",width:"120"},{default:l(({row:t})=>[a(p,{type:t.membershipLevel==="vip"?"danger":"default"},{default:l(()=>[n(o(t.membershipLevel==="vip"?"VIP":"普通"),1)]),_:2},1032,["type"])]),_:1}),a(d,{label:"账户资产",width:"140"},{default:l(({row:t})=>[s("div",de,[s("span",ie,o(t.balanceCoins||0)+" 币",1),a(i,{text:"",size:"small",onClick:P=>w(t)},{default:l(()=>[...e[21]||(e[21]=[n("资产调节",-1)])]),_:1},8,["onClick"])])]),_:1}),a(d,{label:"认证/资质","min-width":"200"},{default:l(({row:t})=>[s("div",re,[s("span",{class:_(t.businessLicense?"text-green-600":"text-red-500")},o(t.businessLicense?"✅ 营业执照":"❌ 营业执照"),3),s("span",{class:_(t.insuranceActive?"text-green-600":"text-red-500")},o(t.insuranceActive?"✅ 保险":"❌ 保险"),3)])]),_:1}),a(d,{label:"信用/风控",width:"160"},{default:l(({row:t})=>[s("div",ue,"信用分 "+o(t.creditScore||0)+" / 投诉 "+o(t.complaintsCount||0),1)]),_:1}),a(d,{label:"活跃数据","min-width":"220"},{default:l(({row:t})=>[s("div",pe,"项目 "+o(t.projectsCount||0)+" / 接单 "+o(t.ordersCount||0),1)]),_:1}),a(d,{label:"注册/登录",width:"200"},{default:l(({row:t})=>[s("div",me,"注册 "+o(t.registerDate)+" / 登录 "+o(t.lastLogin||"—"),1)]),_:1}),a(d,{prop:"contactPerson",label:"联系人",width:"120"}),a(d,{prop:"phone",label:"联系电话",width:"150"}),a(d,{label:"身份标签","min-width":"240"},{default:l(({row:t})=>[s("div",fe,[t.requesterEnterprise?(u(),c(p,{key:0,type:"warning"},{default:l(()=>[...e[22]||(e[22]=[n("需求方",-1)])]),_:1})):V("",!0),t.providerLevel?(u(),c(p,{key:1,type:"success"},{default:l(()=>[...e[23]||(e[23]=[n("服务方",-1)])]),_:1})):V("",!0)])]),_:1}),a(d,{label:"状态",width:"100"},{default:l(({row:t})=>[s("div",ce,[s("div",{class:_(["w-2 h-2 rounded-full",t.status==="active"?"bg-green-500":"bg-gray-300"])},null,2),s("span",ye,o(t.status==="active"?"正常":"待审核"),1)])]),_:1}),a(d,{label:"操作",width:"150",fixed:"right"},{default:l(({row:t})=>[a(i,{link:"",type:"primary",size:"small"},{default:l(()=>[...e[24]||(e[24]=[n("详情",-1)])]),_:1}),a(i,{link:"",type:"primary",size:"small"},{default:l(()=>[...e[25]||(e[25]=[n("编辑",-1)])]),_:1})]),_:1})]),_:1},8,["data"]),a(M,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=t=>y.value=t),title:"资产调节",width:"420px"},{footer:l(()=>[s("div",xe,[a(i,{onClick:e[4]||(e[4]=t=>y.value=!1)},{default:l(()=>[...e[28]||(e[28]=[n("取消",-1)])]),_:1}),a(i,{type:"primary",onClick:A},{default:l(()=>[...e[29]||(e[29]=[n("确定",-1)])]),_:1})])]),default:l(()=>[s("div",_e,[s("div",ve,[a(E,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t)},{default:l(()=>[a(N,{label:"add"},{default:l(()=>[...e[26]||(e[26]=[n("增加",-1)])]),_:1}),a(N,{label:"sub"},{default:l(()=>[...e[27]||(e[27]=[n("减少",-1)])]),_:1})]),_:1},8,["modelValue"])]),a(z,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),type:"number",placeholder:"请输入调整额度（币）"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}};export{ke as default};
